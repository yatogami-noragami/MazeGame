<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Maze Game</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    #maze {
      display: flex;
      flex-wrap: wrap;
      width: 100%;
      height: 100%;
      justify-content: center;
    }


    .wall {
      background-color: #333;
    }

    .player {
      background-color: blue;
    }

    .goal {
      background-color: gold;
    }

    .maze-cell {
      width: calc(100% / 40);
      height: calc(100% / 20);
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
    }


    #controls {
      position: fixed;
      bottom: 1px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    @media (min-width: 992px) {

      #controls {
        display: none;
      }
    }
  </style>
</head>

<body class="d-flex flex-column justify-content-between align-items-center vh-100 bg-light">

  <!-- Maze Grid -->
  <div id="maze" class="p-3"></div>

  <!-- Control Buttons (Bottom) -->
  <div id="controls" class="text-center">
    <div class="">
      <button class="btn btn-danger rounded btn-sm mx-3" onclick="movePlayer(0, -1)">
        <i class="fa-regular fa-square-caret-up"></i>
      </button>
      <button class="btn btn-info rounded btn-sm mx-3" onclick="movePlayer(0, 1)">
        <i class="fa-regular fa-square-caret-down"></i>
      </button>
      <button class="btn btn-warning rounded btn-sm mx-3" onclick="movePlayer(-1, 0)">
        <i class="fa-regular fa-square-caret-left"></i>
      </button>
      <button class="btn btn-success rounded btn-sm mx-3" onclick="movePlayer(1, 0)">
        <i class="fa-regular fa-square-caret-right"></i>
      </button>

    </div>
  </div>



  <script>
    const mazeLayout = [
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
      [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 2, 1],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
    ]
    let playerPos = {
      x: 22,
      y: 18
    };
    const maze = document.getElementById('maze');
    const rows = mazeLayout.length;
    const cols = mazeLayout[0].length;

    function drawMaze() {
      maze.innerHTML = '';
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          const cell = document.createElement('div');
          cell.classList.add('maze-cell');

          if (x === playerPos.x && y === playerPos.y) {
            cell.textContent = '🟦';
            cell.classList.add('player');
          } else if (mazeLayout[y][x] === 1) {
            cell.classList.add('wall');
          } else if (mazeLayout[y][x] === 2) {
            cell.textContent = '🏁';
            cell.classList.add('goal');
          }

          maze.appendChild(cell);
        }
      }
    }

    function movePlayer(dx, dy) {
      const newX = playerPos.x + dx;
      const newY = playerPos.y + dy;
      if (
        newX >= 0 && newX < cols &&
        newY >= 0 && newY < rows &&
        mazeLayout[newY][newX] !== 1
      ) {
        playerPos = {
          x: newX,
          y: newY
        };
        drawMaze();
        if (mazeLayout[newY][newX] === 2) {
          setTimeout(() => alert('🎉 You reached the goal!'), 10);

        }

        if (mazeLayout[newY][newX] === 2) {
          setTimeout(() => {
            alert('🎉 You reached the goal! Restarting the game...');
            // Reset the game by setting the player position back to start
            playerPos = {
              x: 0,
              y: 2
            }; // Starting position
            drawMaze(); // Redraw the maze with the player at the start position
          }, 10); // Delay the restart to show the goal message
        }
      }
    }

    // Add Keyboard Arrow Key Event Listener
    window.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowUp') {
        movePlayer(0, -1);
      } else if (e.key === 'ArrowDown') {
        movePlayer(0, 1);
      } else if (e.key === 'ArrowLeft') {
        movePlayer(-1, 0);
      } else if (e.key === 'ArrowRight') {
        movePlayer(1, 0);
      }
    });

    drawMaze();
  </script>

  <!-- Bootstrap 5 JS (Optional) -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
</body>

</html>
